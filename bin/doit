#! /usr/bin/env python

import sys

from optparse import OptionParser

from doit import main

usage = "usage: %prog [options] [tasks]"
parser = OptionParser(usage)
parser.add_option("-l","--list",action="store_true",dest="list",default=False,
                  help="list tasks from task file [default: %default]")
parser.add_option("-f","--file",dest="file",default="dodo.py",
                  help="load task from FILE [default: %default]")
parser.add_option("-v","--verbosity",dest="verbosity",default=0,
                  help="0 capture stdout/stderr from task. 1 capture stdout only. 2 dont capture anything. [default: %default]")

(options,args) = parser.parse_args()

# execute it
result = main(options.file, verbosity=options.verbosity, 
              list=options.list, filter=args)
sys.exit(result)
